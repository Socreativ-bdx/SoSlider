class SoSlider{static#LIST=[];static getAll(){return SoSlider.#LIST}static killAll(){SoSlider.#LIST.forEach((t=>t.kill()))}constructor(t,e={}){this.element=t,this.dots=e.dots||!1,this.arrows=e.arrows||!1,this.vertical=e.vertical||!1,this.autoplay=e.autoplay||!1,this.infinite=e.infinite||!1,this.speed=e.speed||300,this.autoplaySpeed=e.autoplaySpeed||3e3,this.fade=e.fade||!1,this.draggable=e.draggable||!1,this.arrowsElement=e.arrowsElement||null,this.dotsElement=e.dotsElement||null,this.dotsColor=e.dotsColor||"#000",this.arrowsColor=e.arrowsColor||"#000",this.asNavFor=e.asNavFor||null,this.currentSlide=0,SoSlider.#LIST.push(this),this.initSlider()}initSlider(){this.element.classList.add("SoSlider"),this.slides=Array.from(this.element.children),this.createTrack(),this.resizeSlides(),this.dots&&this.createDots(),this.arrows&&this.createArrows(),this.draggable&&this.ListenForDrag(),this.autoplay&&this.initAutoplay()}createTrack(){this.frame=document.createElement("div"),this.frame.classList.add("SoSlider__frame"),this.element.append(this.frame),this.track=document.createElement("div"),this.track.classList.add("SoSlider__track"),this.frame.append(this.track),this.slides.forEach((t=>this.track.append(t)))}resizeSlides(){this.width=this.element.clientWidth,this.slides.forEach(((t,e)=>{0===e&&t.classList.add("active"),t.classList.add("SoSlider__slide"),t.style.width=this.width+"px"}))}slideToNext(){this.currentSlide<this.slides.length-1?this.currentSlide++:this.infinite&&(this.currentSlide=0),this.slide(this.width*this.currentSlide)}slideToPrev(){this.currentSlide>0?(this.currentSlide--,this.slide(this.width*this.currentSlide)):this.infinite&&(this.currentSlide=0)}initAutoplay(){this.observer=new IntersectionObserver(((t,e)=>{t.forEach((t=>{t.isIntersecting?this.setAutoplayInstance():this.clearAutoplayInstance()}))}),{threshold:.5}),this.observer.observe(this.element)}setAutoplayInstance(){this.autoPlayInstance=setInterval(this.autoPlay.bind(this),this.autoplaySpeed)}clearAutoplayInstance(){clearInterval(this.autoPlayInstance)}autoPlay(){this.infinite||this.currentSlide!==this.slides.length-1?this.slideToNext():this.clearAutoplayInstance()}resetInterval(){this.clearAutoplayInstance()}slide(t){if(document.querySelector(".SoSlider__slide.active").classList.remove("active"),this.slides[this.currentSlide].classList.add("active"),this.dots&&(document.querySelector(".SoSlider__dot.active").classList.remove("active"),this.dotsElement[this.currentSlide].classList.add("active")),this.fade)this.track.animate([{opacity:0}],{duration:this.speed,fill:"forwards",easing:"ease-in"}),setTimeout((()=>{this.track.style.transform=`translateX(-${t}px)`,setTimeout((()=>{this.track.animate([{opacity:1}],{duration:this.speed,fill:"forwards",easing:"ease-out"})}),100)}),this.speed);else{this.track.animate([{transform:`translateX(-${t}px)`}],{duration:this.speed,fill:"forwards",easing:"ease-in-out"}).onfinish=()=>{this.track.style.transform=`translateX(-${t}px)`}}}ListenForDrag(){console.warn("Draggable: Feature not implemented yet.")}createDots(){if(this.element.style.setProperty("--dotsColor",this.dotsColor),this.dotsElement)return console.warn("dotsElement: Feature not implemented yet."),this.dotsElement=!1,this.createDots();{this.dotsElement=[];const t=document.createElement("div");t.classList.add("SoSlider__dots"),this.element.append(t),this.slides.forEach(((e,s)=>{let i=document.createElement("button");i.classList.add("SoSlider__dot"),0===s&&i.classList.add("active"),t.append(i),this.dotsElement.push(i)}))}console.log("reached"),this.ListenForDots()}ListenForDots(){this.dotsElement.forEach(((t,e)=>t.addEventListener("click",(()=>{this.autoPlay&&(this.resetInterval(),this.setAutoplayInstance()),this.currentSlide=e,this.slide(this.width*this.currentSlide)}))))}createArrows(){this.element.style.setProperty("--arrowsColor",this.arrowsColor),this.leftArrow=document.createElement("div"),console.log(this.leftArrow),this.leftArrow.classList.add("SoSlider__leftArrow","SoSlider__arrows"),this.leftArrow.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><title>ic_keyboard_arrow_left_48px</title><g fill="#000000" class="nc-icon-wrapper"><path d="M30.83 32.67l-9.17-9.17 9.17-9.17L28 11.5l-12 12 12 12z"></path></g></svg>',this.rightArrow=document.createElement("div"),this.rightArrow.classList.add("SoSlider__rightArrow","SoSlider__arrows"),this.rightArrow.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><title>ic_keyboard_arrow_right_48px</title><g fill="#000000" class="nc-icon-wrapper"><path d="M17.17 32.92l9.17-9.17-9.17-9.17L20 11.75l12 12-12 12z"></path></g></svg>',this.element.append(this.leftArrow),this.element.append(this.rightArrow),this.ListenForArrows()}ListenForArrows(){this.leftArrow.addEventListener("click",(()=>{this.slideToPrev(),this.autoPlay&&(this.resetInterval(),this.setAutoplayInstance())})),this.rightArrow.addEventListener("click",(()=>{this.slideToNext(),this.autoPlay&&(this.resetInterval(),this.setAutoplayInstance())}))}kill(){const t=SoSlider.#LIST.indexOf(this);SoSlider.#LIST.splice(t,1)}}