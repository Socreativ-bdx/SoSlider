class SoSlider{static#LIST=[];static getAll(){return SoSlider.#LIST}static killAll(){SoSlider.#LIST.forEach((t=>t.kill()))}constructor(t,s={}){this.element=t,this.dots=s.dots||!1,this.ease=s.ease||"ease-in-out",this.arrows=s.arrows||!1,this.vertical=s.vertical||!1,this.autoplay=s.autoplay||!1,this.infinite=s.infinite||!1,this.speed=s.speed||300,this.pauseOnHover=s.pauseOnHover||!1,this.autoplaySpeed=s.autoplaySpeed||3e3,this.fade=s.fade||!1,this.draggable=s.draggable||!1,this.appendArrows=s.appendArrows||null,this.appendDots=s.appendDots||null,this.nextArrow=s.nextArrow||null,this.prevArrow=s.prevArrow||null,this.arrowsClass=s.arrowsClass||null,this.dotsClass=s.dotsClass||null,this.dotsColor=s.dotsColor||"#000",this.arrowsColor=s.arrowsColor||"#000",this.asNavFor=s.asNavFor||null,this.slideToShow=s.slideToShow||1,this.slideToScroll=s.slideToScroll||1,this.centerMode=s.centerMode||!1,this.isSliding=!1,this.slideToScroll>this.slideToShow&&(this.slideToScroll=this.slideToShow),this.currentSlide=0,SoSlider.#LIST.push(this),this.initSlider()}initSlider(){this.element.classList.add("SoSlider"),this.slides=Array.from(this.element.children),this.width=this.element.clientWidth,this.offset=this.infinite&&!this.fade?this.slideToShow:0,this.createTrack(),this.resizeSlides(),this.dots&&this.createDots(),this.arrows&&this.createArrows(),this.draggable&&this.ListenForDrag(),this.autoplay&&this.initAutoplay(),this.pauseOnHover&&this.autoplay&&this.ListenForHover(),this.infinite&&!this.fade&&this.initInfinite()}createTrack(){this.frame=document.createElement("div"),this.frame.classList.add("SoSlider__frame"),this.element.append(this.frame),this.track=document.createElement("div"),this.track.classList.add("SoSlider__track"),this.track.style.transform=`translateX(-${this.offset*this.width}px)`,this.frame.append(this.track),this.slides.forEach((t=>this.track.append(t)))}resizeSlides(){this.slides.forEach(((t,s)=>{0===s&&t.classList.add("active"),t.classList.add("SoSlider__slide"),t.style.width=this.width+"px"}))}initInfinite(){for(let t=0;t<this.slideToShow;t++){const s=this.slides[t].cloneNode(!0);s.removeAttribute("data-fancybox"),s.classList.add("SoSlider__copy"),0===t&&s.classList.remove("active"),this.track.append(s);const e=this.slides[this.slides.length-1-t].cloneNode(!0);e.removeAttribute("data-fancybox"),e.classList.add("SoSlider__copy"),this.track.prepend(e)}}initAutoplay(){this.observer=new IntersectionObserver(((t,s)=>{t.forEach((t=>{t.isIntersecting?this.setAutoplayInstance():this.clearAutoplayInstance()}))}),{threshold:.5}),this.observer.observe(this.element)}setAutoplayInstance(){this.autoplay&&(this.autoPlayInstance=setInterval(this.autoPlay.bind(this),this.autoplaySpeed))}clearAutoplayInstance(){clearInterval(this.autoPlayInstance)}autoPlay(){this.infinite||this.currentSlide!==this.slides.length-1&&this.fade?this.slideToNext():this.clearAutoplayInstance()}resetInterval(){this.clearAutoplayInstance()}setClassActive(t){document.querySelector(".SoSlider__slide.active").classList.remove("active"),this.slides[t].classList.add("active"),this.dots&&(document.querySelector(".SoSlider__dot.active").classList.remove("active"),this.dotsElement[t].classList.add("active"))}slideToNext(){if(this.isSliding=!0,this.currentSlide<this.slides.length-1)this.currentSlide++;else if(this.infinite&&(this.currentSlide=0,!this.fade))return this.fakeSlide=this.slides.length,this.setClassActive(this.currentSlide),this.slideTo(this.fakeSlide,this.currentSlide);this.fade?this.fadeTo(this.currentSlide):this.slideTo(this.currentSlide),this.setClassActive(this.currentSlide)}slideToPrev(){if(this.isSliding=!0,this.currentSlide>0)this.currentSlide--;else if(this.infinite&&(this.currentSlide=this.slides.length-1,!this.fade))return this.fakeSlide=-1,this.setClassActive(this.currentSlide),this.slideTo(this.fakeSlide,this.currentSlide);this.fade?this.fadeTo(this.currentSlide):this.slideTo(this.currentSlide),this.setClassActive(this.currentSlide)}slideTo(t,s=t){this.track.animate([{transform:`translateX(-${(t+this.offset)*this.width}px)`}],{duration:this.speed,easing:this.ease}).onfinish=()=>{this.track.style.transform=`translateX(-${(s+this.offset)*this.width}px)`,this.isSliding=!1}}fadeTo(t){this.track.animate([{opacity:0}],{duration:this.speed,fill:"forwards",easing:this.ease}).onfinish=()=>{this.track.style.transform=`translateX(-${(t+this.offset)*this.width}px)`,setTimeout((()=>{this.track.animate([{opacity:1}],{duration:this.speed,fill:"forwards",easing:this.ease}),this.isSliding=!1}),100)}}ListenForDrag(){console.warn("Draggable: Feature not implemented yet.")}createDots(){this.dotsElement=[];const t=document.createElement("div");t.classList.add("SoSlider__dots"),this.slides.forEach(((s,e)=>{let i=document.createElement("button");i.classList.add("SoSlider__dot"),null!==this.dotsClass&&i.classList.add(this.dotsClass),0===e&&i.classList.add("active"),t.append(i),this.dotsElement.push(i)})),this.appendDots?(this.appendDots.append(t),this.appendDots.style.setProperty("--dotsColor",this.dotsColor)):(this.element.append(t),this.element.style.setProperty("--dotsColor",this.dotsColor)),this.ListenForDots()}ListenForDots(){this.dotsElement.forEach(((t,s)=>t.addEventListener("click",(()=>{this.isSliding||(this.isSliding=!0,this.autoplay&&(this.resetInterval(),this.setAutoplayInstance()),this.currentSlide=s,this.slideTo(this.currentSlide+this.offset),this.setClassActive(this.currentSlide))}))))}createArrows(){this.prevArrow?this.leftArrow=this.prevArrow:(this.leftArrow=document.createElement("div"),this.leftArrow.classList.add("SoSlider__leftArrow","SoSlider__arrows"),this.leftArrow.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><title>ic_keyboard_arrow_left_48px</title><g fill="#000000" class="nc-icon-wrapper"><path d="M30.83 32.67l-9.17-9.17 9.17-9.17L28 11.5l-12 12 12 12z"></path></g></svg>'),null!==this.arrowsClass&&this.leftArrow.classList.add(this.arrowsClass),this.nextArrow?this.rightArrow=this.nextArrow:(this.rightArrow=document.createElement("div"),this.rightArrow.classList.add("SoSlider__rightArrow","SoSlider__arrows"),this.rightArrow.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><title>ic_keyboard_arrow_right_48px</title><g fill="#000000" class="nc-icon-wrapper"><path d="M17.17 32.92l9.17-9.17-9.17-9.17L20 11.75l12 12-12 12z"></path></g></svg>'),null!==this.arrowsClass&&this.rightArrow.classList.add(this.arrowsClass),this.appendArrows?(this.appendArrows.style.setProperty("--arrowsColor",this.arrowsColor),this.appendArrows.append(this.leftArrow),this.appendArrows.append(this.rightArrow)):(this.element.style.setProperty("--arrowsColor",this.arrowsColor),this.element.append(this.leftArrow),this.element.append(this.rightArrow)),this.ListenForArrows()}ListenForArrows(){this.leftArrow.addEventListener("click",(()=>{this.isSliding||(this.slideToPrev(),this.autoplay&&(this.resetInterval(),this.setAutoplayInstance()))})),this.rightArrow.addEventListener("click",(()=>{this.isSliding||(this.slideToNext(),this.autoplay&&(this.resetInterval(),this.setAutoplayInstance()))}))}ListenForHover(){this.element.addEventListener("mouseover",(()=>this.clearAutoplayInstance())),this.element.addEventListener("mouseleave",(()=>this.setAutoplayInstance()))}kill(){const t=SoSlider.#LIST.indexOf(this);SoSlider.#LIST.splice(t,1)}}